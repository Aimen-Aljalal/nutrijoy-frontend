(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{477:(e,s,n)=>{Promise.resolve().then(n.bind(n,5004))},5004:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>o});var r=n(5155),a=n(2115),i=n(5695),t=n(6874),l=n.n(t);function o(e){let{children:s}=e,n=(0,i.useRouter)(),[t,o]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(async()=>{try{var e;let s=localStorage.getItem("token");if(!s){console.log("No token found, redirecting to login..."),n.push("/login");return}let r=await fetch("https://nutrijoy-backend.onrender.com/api/user/profile",{headers:{Authorization:"Bearer ".concat(s)}});if(!r.ok){console.log("Profile fetch failed, redirecting to login..."),n.push("/login");return}if((null==(e=(await r.json()).role)?void 0:e.toLowerCase())!=="admin"){console.log("User is not admin, redirecting to dashboard..."),n.push("/dashboard");return}o(!1)}catch(e){console.error("Error checking admin:",e),n.push("/login")}})()},[n]),t)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("p",{className:"text-lg text-gray-600",children:"Checking permissions..."})}):(0,r.jsxs)("div",{className:"flex min-h-screen",children:[(0,r.jsxs)("aside",{className:"w-64 bg-gray-800 text-white p-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Admin Panel"}),(0,r.jsxs)("nav",{className:"flex flex-col gap-4",children:[(0,r.jsx)(l(),{href:"/admin/users",children:"Manage Users"}),(0,r.jsx)(l(),{href:"/admin/meals",children:"Manage Meals"}),(0,r.jsx)(l(),{href:"/admin/add-meal",children:"Add Meal"}),(0,r.jsx)(l(),{href:"/admin/stats",children:"Statistics"})]})]}),(0,r.jsx)("main",{className:"flex-1 p-6 bg-gray-50",children:s})]})}}},e=>{e.O(0,[244,441,964,358],()=>e(e.s=477)),_N_E=e.O()}]);